<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bienvenida Mariana</title>
  <style>
    :root{--accent:#8b0000}
    body {
      background-color: #ffffff;
      margin: 0;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      color: #2b0202;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 24px;
      box-sizing: border-box;
    }
    .container {
      width: 100%;
      max-width: 700px;
      text-align: center;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      background: #fff;
    }
    h1 {
      font-size: 28px;
      margin: 8px 0 16px;
    }
    .cat-slot{
      width: 160px;
      height: 160px;
      margin: 0 auto 14px;
      display:flex;align-items:center;justify-content:center;border-radius:8px;border:2px dashed #eee;background:#fafafa;
      font-size:48px;color:#bbb;
    }
    textarea {
      width: 100%;
      min-height: 120px;
      border-radius: 10px;
      border: 2px solid #ccc;
      padding: 12px;
      font-size: 15px;
      resize: vertical;
      box-sizing: border-box;
    }
    button {
      margin-top: 12px;
      padding: 10px 16px;
      border-radius: 8px;
      border: none;
      background-color: var(--accent);
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    .note{margin-top:10px;color:#666;font-size:13px}

    /* Modal fallback styles (full-screen) */
    .overlay{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:9999;padding:20px;box-sizing:border-box
    }
    .overlay.show{display:flex}
    .overlay .panel{background:#fff;padding:28px;border-radius:12px;max-width:700px;width:100%;text-align:center}
    .overlay .panel h2{margin:0 0 12px;color:var(--accent);font-size:22px}
    .overlay .panel p{font-size:18px;margin:8px 0}
    .overlay .panel button{margin-top:14px}

  </style>
</head>
<body>
  <div class="container">
    <h1>Bienvenida Mariana 游떂</h1>

    <!-- Aqu칤 va la imagen del gato (coloca 'gato.png' junto al HTML o cambia el src) -->
    <div class="cat-slot" aria-hidden="true" id="catSlot">游떂</div>

    <form id="quejaForm">
      <label for="queja">Tu queja, Mariana:</label><br>
      <textarea id="queja" name="queja" placeholder="Escribe aqu칤 lo que quieras contarnos..."></textarea><br>
      <button type="submit">Enviar</button>
      <div class="note">Al enviar se abrir치 una nueva pesta침a con la confirmaci칩n. Si el navegador la bloquea, ver치s el mensaje aqu칤 mismo.</div>
    </form>
  </div>

  <!-- Modal / fallback cuando no se puede abrir o escribir en nueva pesta침a -->
  <div id="fallbackOverlay" class="overlay" role="dialog" aria-modal="true">
    <div class="panel">
      <h2>Gracias 游녧</h2>
      <p id="fallbackMessage">Gracias por escribir tu queja, en un mes recibir치s respuesta 游녧</p>
      <button id="closeOverlay">Cerrar</button>
    </div>
  </div>

  <script>
    (function(){
      const form = document.getElementById('quejaForm');
      const overlay = document.getElementById('fallbackOverlay');
      const closeOverlay = document.getElementById('closeOverlay');

      // If you want to show the actual uploaded image, set it here (optional):
      // document.getElementById('catSlot').innerHTML = '<img src="gato.png" alt="Gato" style="max-width:100%;height:100%;object-fit:cover;border-radius:6px">';

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const text = document.getElementById('queja').value.trim();
        if (!text) {
          alert('Por favor escribe tu queja antes de enviar.');
          return;
        }

        // Guardar localmente (simulaci칩n)
        try{
          const stored = JSON.parse(sessionStorage.getItem('quejas_mariana') || '[]');
          stored.push({texto:text,timestamp:new Date().toISOString()});
          sessionStorage.setItem('quejas_mariana', JSON.stringify(stored));
        }catch(err){
          // si sessionStorage falla, no bloqueamos el flujo
          console.warn('No se pudo guardar en sessionStorage.', err);
        }

        // Intentamos abrir nueva pesta침a y escribir en ella
        let nuevaVentana = null;
        try{
          nuevaVentana = window.open('', '_blank');
        }catch(err){
          nuevaVentana = null;
        }

        // Comprobar si la ventana fue creada y si podemos acceder a su documento
        const canWriteNewWindow = nuevaVentana && typeof nuevaVentana.document !== 'undefined' && nuevaVentana.document;

        if (canWriteNewWindow) {
          try {
            nuevaVentana.document.open();
            nuevaVentana.document.write(`<!doctype html><html lang='es'><head><meta charset='utf-8'><title>Gracias</title>
              <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"> 
              <style>body{background:#fff;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;font-family:Inter,system-ui,Arial;color:var(--accent);text-align:center}h1{font-size:28px;color:#8b0000}</style>
              </head><body><h1>Gracias por escribir tu queja, en un mes recibir치s respuesta 游녧</h1></body></html>`);
            nuevaVentana.document.close();

            // foco opcional
            try{ nuevaVentana.focus(); }catch(e){}
            return; // ya mostramos en nueva ventana
          } catch (err) {
            // Si algo falla al escribir, caemos al fallback
            console.warn('No fue posible escribir en la nueva ventana:', err);
          }
        }

        // FALLBACK: mostrar modal en la misma p치gina
        document.getElementById('fallbackMessage').textContent = 'Gracias por escribir tu queja, en un mes recibir치s respuesta 游녧';
        overlay.classList.add('show');
      });

      closeOverlay.addEventListener('click', () => {
        overlay.classList.remove('show');
      });

      // cerrar overlay al pulsar ESC
      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape') overlay.classList.remove('show');
      });

    })();
  </script>
</body>
</html>
